#Jan 12, 0952 version
cases = (
('???????????........??........??........??...o@...??...@o...??........??........??........???????????', '@', [34, 43, 56, 65]),
('???????????........??........??........??...o@...??...@@@..??........??........??........???????????', 'o', [46, 64, 66]),
('???????????........??........??........??...ooo..??...@@@..??........??........??........???????????', '@', [33, 34, 35, 36, 37]),
('???????????........??........??..@.....??...@oo..??...@@@..??........??........??........???????????', 'o', [43, 63, 64, 65, 66, 67]),
('???????????........??........??..@.....??...@oo..??...@o@..??....o...??........??........???????????', '@', [34, 36, 47, 66, 74, 76]),
('???????????........??........??..@.....??...@oo..??...@@@..??....o@..??........??........???????????', 'o', [43, 47, 63, 64, 67, 76]),
('???????????........??........??..@.....??...@oo..??...@@o..??....ooo.??........??........???????????', '@', [35, 36, 37, 47, 57, 75, 76, 77]),
('???????????........??........??..@...@.??...@o@..??...@@o..??....ooo.??........??........???????????', 'o', [22, 36, 43, 47, 53, 63]),
('???????????........??........??..@...@.??..ooo@..??...o@o..??....ooo.??........??........???????????', '@', [35, 42, 53, 57, 75, 76, 77]),
('???????????........??........??..@...@.??..ooo@..??...o@@..??....o@o.??.....@..??........???????????', 'o', [22, 23, 47, 57, 77, 85, 87]),
('???????????........??........??..@...@.??..ooo@..??...o@@..??....o@o.??.....o..??....o...???????????', '@', [34, 35, 42, 53, 64, 68, 74, 75, 78, 86]),
('???????????........??........??..@...@.??..ooo@..??...o@@..??....o@@@??.....o..??....o...???????????', 'o', [22, 23, 36, 47, 57, 58, 77, 78]),
('???????????........??........??..@...@.??..ooo@..??...o@o..??....o@o@??.....o.o??....o...???????????', '@', [35, 42, 53, 57, 64, 75, 86, 88]),
('???????????........??........??..@...@.??..ooo@..??...o@o..??....o@o@??.....o.@??....o..@???????????', 'o', [22, 23, 36, 47, 77]),
('???????????........??..o.....??..o...@.??..ooo@..??...o@o..??....o@o@??.....o.@??....o..@???????????', '@', [22, 34, 35, 42, 53, 57, 64, 75, 86]),
('???????????........??..o.....??..o...@.??..ooo@..??...o@o..??....@@o@??....@o.@??....o..@???????????', 'o', [36, 47, 64, 74, 77]),
('???????????........??..o.....??..o...@.??..ooo@..??...o@o..??...oooo@??....@o.@??....o..@???????????', '@', [22, 34, 35, 42, 53, 57, 63, 73, 77, 86]),
('???????????........??..o.....??..o...@.??.@@@@@..??...o@o..??...oooo@??....@o.@??....o..@???????????', 'o', [28, 32, 34, 35, 36, 51, 53, 74, 84, 86]),
('???????????........??..o.....??..o...@.??.@@@@@..??...o@o..??...oooo@??...ooo.@??....o..@???????????', '@', [13, 22, 24, 53, 57, 63, 73, 77, 84, 86, 87]),
('???????????........??..o.....??..o...@.??.@@@@@..??...o@o..??...oo@o@??...ooo@@??....o..@???????????', 'o', [28, 32, 34, 35, 36, 51, 53, 57, 87]),
('???????????........??..o.....??..o...@.??.@@@@@..??...o@oo.??...oooo@??...ooo@@??....o..@???????????', '@', [13, 22, 24, 47, 53, 58, 63, 73, 84, 86, 87]),
('???????????........??..o.....??..o...@.??.@@@@@..??..@@@oo.??...oooo@??...ooo@@??....o..@???????????', 'o', [28, 31, 32, 34, 35, 36, 51, 52, 63, 87]),
('???????????........??..o.....??..oo..@.??.@@oo@..??..@o@oo.??...oooo@??...ooo@@??....o..@???????????', '@', [12, 13, 22, 24, 25, 35, 47, 58, 63, 73, 86, 87]),
('???????????........??..o.....??..oo@.@.??.@@@@@..??..@o@oo.??...oooo@??...ooo@@??....o..@???????????', 'o', [24, 25, 28, 31, 32, 36, 51, 52, 63, 87]),
('???????????........??..oo....??..ooo.@.??.@@@@o..??..@o@oo.??...oooo@??...ooo@@??....o..@???????????', '@', [12, 13, 14, 15, 22, 25, 26, 47, 58, 63, 73, 84, 86, 87]),
('???????????........??..oo....??..ooo.@.??.@@@@o..??..@o@@@@??...oooo@??...ooo@@??....o..@???????????', 'o', [28, 31, 32, 36, 41, 47, 48, 51, 52, 62, 63, 87]),
('???????????........??..oo....??..ooo.@.??.@@@@o.o??..@o@@o@??...oooo@??...ooo@@??....o..@???????????', '@', [12, 13, 14, 15, 22, 25, 26, 36, 38, 47, 63, 73, 83, 84, 86, 87]),
('???????????........??..oo....??..ooo.@.??.@@@@o.o??..@@@@o@??...o@oo@??...oo@@@??....o.@@???????????', 'o', [26, 28, 31, 41, 47, 51, 52, 62, 63, 86]),
('???????????........??..oo....??..ooo.@.??.@@o@o.o??..o@@@o@??.o.o@oo@??...oo@@@??....o.@@???????????', '@', [12, 13, 14, 15, 22, 25, 36, 38, 47, 52, 63, 73, 83, 84, 86]),
('???????????........??..oo....??..ooo.@.??.@@o@o.o??..@@@@o@??.o@@@oo@??...oo@@@??....o.@@???????????', 'o', [26, 28, 31, 41, 47, 51, 52, 73, 86]),
('???????????........??..oo....??..ooo.@.??.o@o@o.o??o.@@@@o@??.o@@@oo@??...oo@@@??....o.@@???????????', '@', [12, 13, 14, 22, 25, 26, 31, 36, 38, 41, 47, 61, 71, 73, 83, 84, 86]),
('???????????...@....??..o@....??..o@o.@.??.o@@@o.o??o.@@@@o@??.o@@@oo@??...oo@@@??....o.@@???????????', 'o', [13, 15, 25, 26, 28, 47, 52, 73, 86]),
('???????????...@....??..o@...o??..o@o.o.??.o@@@o.o??o.@@@@o@??.o@@@oo@??...oo@@@??....o.@@???????????', '@', [12, 13, 22, 25, 26, 31, 32, 36, 38, 41, 47, 61, 71, 73, 83, 84, 86]),
('???????????...@....??..o@...o??@.o@o.o.??.@@@@o.o??o.@@@@o@??.o@@@oo@??...oo@@@??....o.@@???????????', 'o', [13, 15, 25, 41, 47, 52, 73, 86]),
('???????????...@....??..o@...o??@.o@o.o.??.@o@@o.o??o.o@o@o@??.ooo@oo@??..ooo@@@??....o.@@???????????', '@', [12, 22, 25, 26, 32, 36, 38, 47, 52, 61, 71, 72, 83, 84, 86]),
('???????????...@....??..o@.@.o??@.o@@.o.??.@o@@o.o??o.o@o@o@??.ooo@oo@??..ooo@@@??....o.@@???????????', 'o', [13, 15, 17, 25, 36, 41, 47, 86]),
('???????????..o@....??..oo.@.o??@.o@o.o.??.@o@@o.o??o.o@o@o@??.ooo@oo@??..ooo@@@??....o.@@???????????', '@', [12, 15, 22, 25, 32, 36, 38, 47, 52, 61, 71, 72, 83, 84, 86]),
('???????????..o@....??..oo.@.o??@.o@o.o.??.@o@@o.o??o.o@o@o@??.o@o@oo@??.@@@@@@@??....o.@@???????????', 'o', [15, 17, 25, 41, 52, 82, 83, 84, 86]),
('???????????..o@....??..oo.@.o??@.o@o.o.??.@o@@o.o??o.o@o@o@??.o@o@oo@??.@@@oo@@??....oo@@???????????', '@', [12, 15, 22, 25, 32, 36, 38, 47, 52, 61, 71, 84]),
('???????????..o@....??..oo.@.o??@.o@o.o.??.@o@@@@o??o.o@o@@@??.o@o@o@@??.@@@oo@@??....oo@@???????????', 'o', [15, 17, 25, 36, 41, 52, 71, 82, 83, 84]),
('???????????..o@....??..ooo@.o??@.ooo.o.??.@o@@@@o??o.o@o@@@??.o@o@o@@??.@@@oo@@??....oo@@???????????', '@', [12, 15, 22, 27, 32, 36, 38, 52, 61, 71, 84]),
('???????????.@@@....??..@oo@.o??@.o@o.o.??.@o@@@@o??o.o@o@@@??.o@o@o@@??.@@@oo@@??....oo@@???????????', 'o', [15, 17, 22, 27, 36, 41, 52, 71, 82, 83, 84]),
('???????????.@@@....??..@oo@.o??@.o@ooo.??.@o@@o@o??o.o@oo@@??.o@o@o@@??.@@@oo@@??....oo@@???????????', '@', [15, 16, 22, 27, 32, 38, 52, 61, 71, 84]),
('???????????.@@@....??..@oo@.o??@.o@ooo.??.@o@@o@o??o.o@oo@@??.o@o@@@@??.@@@@o@@??...@@@@@???????????', 'o', [15, 16, 17, 22, 27, 38, 41, 71, 81, 82, 83]),
('???????????.@@@....??..@oo@.o??@.o@ooo.??.@o@@o@o??o.o@oo@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', '@', [15, 16, 22, 27, 32, 38, 52, 61, 71, 82]),
('???????????.@@@....??..@oo@.o??@@@@ooo.??.@@@@o@o??o.o@oo@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', 'o', [15, 16, 17, 21, 22, 27, 38, 41, 52, 61, 71, 81, 82]),
('???????????.@@@....??..@ooooo??@@@@ooo.??.@@@@o@o??o.o@oo@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', '@', [15, 16, 17, 18, 38, 52, 61, 71, 82]),
('???????????.@@@.@..??..@o@@oo??@@@@o@o.??.@@@@@@o??o.o@o@@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', 'o', [15, 17, 21, 22, 38, 41, 61, 71, 81, 82]),
('???????????.@@@.@o.??..@o@ooo??@@@@o@o.??.@@@@@@o??o.o@o@@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', '@', [15, 18, 38, 52, 61, 71, 82]),
('???????????.@@@@@o.??..@@@ooo??@@@@o@o.??.@@@@@@o??o.o@o@@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', 'o', [11, 21, 22, 38, 41, 61, 71, 81, 82]),
('???????????.@@@@@o.??.ooooooo??@@o@o@o.??.@@o@@@o??o.o@o@@@??.oooo@@@??.@oo@o@@??..o@@@@@???????????', '@', [11, 18, 38, 52, 61, 82]),
('???????????.@@@@@o.??.ooooooo??@@o@o@o.??.@@o@@@o??o@@@o@@@??.@@oo@@@??.@o@@o@@??..o@@@@@???????????', 'o', [11, 21, 38, 41, 61, 71, 81, 82]),
('???????????.@@@@@o.??.ooooooo??@oo@o@o.??.o@o@@@o??oo@@o@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', '@', [11, 18, 21, 38, 41, 61, 71, 81]),
('???????????@@@@@@o.??.@oooooo??@o@@o@o.??.o@@@@@o??oo@@@@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', 'o', [21, 38]),
('???????????@@@@@@o.??oooooooo??@o@@o@o.??.o@@@@@o??oo@@@@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', '@', [18, 38, 41, 61, 71, 81]),
('???????????@@@@@@@@??oooooo@o??@o@@o@o.??.o@@@@@o??oo@@@@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', 'o', [38, 41]),
('???????????@@@@@@@@??oooooo@o??oo@@o@o.??oo@@@@@o??oo@@@@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', '@', [38, 61, 71, 81]),
('???????????@@@@@@@@??oooooo@@??oo@@o@@@??oo@@@@@@??oo@@@@@@??.o@oo@@@??.oo@@o@@??.oo@@@@@???????????', '@', [61, 71, 81]),
('???????????@@@@@@@@??@ooooo@@??@o@@o@@@??@o@@@@@@??@@@@@@@@??@@@oo@@@??.oo@@o@@??.oo@@@@@???????????', 'o', [71]),
('???????????@@@@@@@@??@ooooo@@??@o@@o@@@??@o@o@@@@??@@o@@@@@??@o@oo@@@??ooo@@o@@??.oo@@@@@???????????', '@', [81])
)


import strategy as ai
import time

def test_all():
    ref = ai.Strategy()

    for i in cases:
        board, player, moves = i
        #assert(ref.get_valid_moves(board,player) == i)
        my_moves = ref.get_valid_moves(board, player)
        print(sorted(my_moves), sorted(moves))
        assert(set(my_moves) == set(moves))

def test_time():
    ref = ai.Strategy()
    board, player, moves = cases[30]
    tic = time.time()
    for i in range(10000):
        ref.get_valid_moves(board, player)
    toc = time.time()
    print(toc-tic)


test_all()
test_time()